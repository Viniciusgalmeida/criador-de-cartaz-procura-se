#!/usr/bin/env sh

echo "🔍 Executando ferramentas de QA..."

echo "📝 ESLint - Verificação de código..."
npm run lint
if [ $? -ne 0 ]; then
  echo "❌ ESLint falhou. Corrija os erros antes de commitar."
  exit 1
fi

echo "🔧 TypeScript - Verificação de tipos..."
npm run typecheck
if [ $? -ne 0 ]; then
  echo "❌ TypeScript falhou. Corrija os erros de tipagem antes de commitar."
  exit 1
fi

echo "🏗️ Build - Verificação de produção..."
npm run build
if [ $? -ne 0 ]; then
  echo "❌ Build falhou. Corrija os erros antes de commitar."
  exit 1
fi

echo "🧪 Testes - Execução completa..."
npm run test:run
if [ $? -ne 0 ]; then
  echo "❌ Testes falharam. Corrija os testes antes de commitar."
  exit 1
fi

echo "✅ Todas as verificações passaram! Commit permitido."
